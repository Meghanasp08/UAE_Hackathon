<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Apply for Smart Credit</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">
    <img src="assets/shukria-logo.png" alt="Shukria Logo" class="logo" style="height:48px;" onerror="this.style.display='none'"/>
  <h1 style="color:#7B2687;font-family:sans-serif;letter-spacing:1px;"></h1>
    </div>
    <nav class="nav-links">
  <a href="index.html" class="nav-link">Dashboard</a>
  <a href="credit-line.html" class="nav-link">Credit Line</a>
  <a href="apply.html" class="nav-link active">Apply</a>
  <a href="transactions.html" class="nav-link">Transactions</a>
    </nav>
  <div class="user">Hello, Priya Sharma</div>
  </header>

  <main class="container">
    <section class="apply-header">
      <h2>Apply for Smart Credit</h2>
      <p class="subtitle">Complete your application in minutes with AI-powered credit assessment</p>
    </section>

    <!-- Progress indicator -->
    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
      <div class="progress-step active" data-step="1">
        <div class="step-circle">1</div>
        <span class="step-label">Personal Info</span>
      </div>
      <div class="progress-step" data-step="2">
        <div class="step-circle">2</div>
        <span class="step-label">Account Connect</span>
      </div>
      <div class="progress-step" data-step="3">
        <div class="step-circle">3</div>
        <span class="step-label">Credit Check</span>
      </div>
      <div class="progress-step" data-step="4">
        <div class="step-circle">4</div>
        <span class="step-label">Approval</span>
      </div>
    </div>

    <!-- Application Form -->
    <form id="applicationForm" class="application-form">
      <!-- Step 1: Personal Information -->
      <section id="step1" class="form-section active">
        <h3>Personal Information</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="fullName">Full Name *</label>
            <input type="text" id="fullName" name="fullName" required aria-required="true" value="Priya Sharma"/>
          </div>
          <div class="form-group">
            <label for="emiratesID">Emirates ID *</label>
            <input type="text" id="emiratesID" name="emiratesID" required aria-required="true" value="784-1992-9876543-2"/>
          </div>
          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required aria-required="true" value="priya.sharma@shukria.com"/>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input type="tel" id="phone" name="phone" required aria-required="true" value="+971 55 987 6543"/>
          </div>
          <div class="form-group full-width">
            <label for="monthlyIncome">Monthly Income (AED)</label>
            <input type="number" id="monthlyIncome" name="monthlyIncome" value="22000"/>
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-primary" id="nextStep1">Next: Connect Account</button>
          <button type="button" class="btn-outline" id="voiceApply">üé§ Start with Voice</button>
        </div>
      </section>

      <!-- Step 2: Account Connection -->
      <section id="step2" class="form-section">
        <h3>Connect Your Bank Account</h3>
        <p>We'll securely access your account data through Nebras (UAE's Open Banking platform) to assess your credit eligibility.</p>
        
        <div class="consent-box">
          <h4>Data Consent Required</h4>
          <p>By connecting your account, you consent to:</p>
          <ul>
            <li>Read-only access to account balances</li>
            <li>Transaction history (last 6 months)</li>
            <li>Account holder information verification</li>
          </ul>
          <label class="checkbox-label">
            <input type="checkbox" id="consentCheckbox" required/>
            <span>I consent to share my account data via Nebras Open Banking</span>
          </label>
        </div>

        <div class="bank-selection">
          <h4>Select Your Bank</h4>
          <div class="bank-grid">
            <button type="button" class="bank-card" data-bank="adcb">
              <span class="bank-logo">üè¶</span>
              <span>ADCB</span>
            </button>
            <button type="button" class="bank-card" data-bank="emiratesnbd">
              <span class="bank-logo">üè¶</span>
              <span>Emirates NBD</span>
            </button>
            <button type="button" class="bank-card" data-bank="fab">
              <span class="bank-logo">üè¶</span>
              <span>FAB</span>
            </button>
            <button type="button" class="bank-card" data-bank="mashreq">
              <span class="bank-logo">üè¶</span>
              <span>Mashreq</span>
            </button>
          </div>
        </div>

        <div id="connectionStatus" class="connection-status" hidden>
          <div class="spinner"></div>
          <p id="statusText">Connecting to your bank...</p>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-outline" id="backStep2">‚Üê Back</button>
          <button type="button" class="btn-primary" id="nextStep2" disabled>Next: Credit Check</button>
        </div>
      </section>

      <!-- Step 3: Credit Assessment -->
      <section id="step3" class="form-section">
        <h3>Credit Assessment</h3>
        <p>Analyzing your financial profile...</p>
        
        <div class="assessment-progress">
          <div class="assessment-item" id="assess1">
            <div class="spinner small"></div>
            <span>Verifying account data...</span>
          </div>
          <div class="assessment-item" id="assess2">
            <div class="spinner small"></div>
            <span>Calculating credit score...</span>
          </div>
          <div class="assessment-item" id="assess3">
            <div class="spinner small"></div>
            <span>Evaluating ESG compatibility...</span>
          </div>
        </div>

        <div id="creditResult" class="credit-result" hidden>
          <div class="result-success">
            <span class="result-icon">‚úÖ</span>
            <h4>Congratulations! You're Pre-Approved</h4>
            <div class="credit-offer">
              <div class="offer-item">
                <span class="offer-label">Credit Limit</span>
                <span class="offer-value">AED 15,250</span>
              </div>
              <div class="offer-item">
                <span class="offer-label">APR</span>
                <span class="offer-value">8.9%</span>
              </div>
              <div class="offer-item">
                <span class="offer-label">Setup Fee</span>
                <span class="offer-value">AED 0</span>
              </div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-outline" id="backStep3">‚Üê Back</button>
          <button type="button" class="btn-primary" id="acceptOffer" disabled>Accept & Activate</button>
        </div>
      </section>

      <!-- Step 4: Success -->
      <section id="step4" class="form-section">
        <div class="success-screen">
          <span class="success-icon">üéâ</span>
          <h3>Your Smart Credit Line is Active!</h3>
          <p>Your credit line has been activated and is ready to use.</p>
          
          <div class="credit-summary">
            <div class="summary-item">
              <span class="summary-label">Available Credit</span>
              <span class="summary-value">AED 15,250</span>
            </div>
            <div class="summary-item">
              <span class="summary-label">Interest Rate</span>
              <span class="summary-value">8.9% APR</span>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-primary" onclick="location.href='credit-line.html'">
              Set Up SmartPay Rules
            </button>
            <button type="button" class="btn-outline" onclick="location.href='index.html'">
              Go to Dashboard
            </button>
          </div>
        </div>
      </section>
    </form>
  </main>

  <!-- Floating voice button -->
  <button id="voiceBtn" class="voice-btn" aria-label="Activate voice commands" title="Voice commands">
    üé§
  </button>

  <!-- Voice feedback live region -->
  <div id="voiceFeedback" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- Consent Modal -->
  <div id="consentModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="consentTitle" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="consentTitle">Nebras Open Banking Consent</h3>
        <button class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <p><strong>You are about to share your financial data securely through Nebras.</strong></p>
        <p>Mercury Smart Credit will access:</p>
        <ul>
          <li>Account balances (read-only)</li>
          <li>Transaction history (6 months)</li>
          <li>Account holder verification</li>
        </ul>
        <p>Your data is encrypted and will only be used for credit assessment purposes.</p>
        <div class="form-actions">
          <button class="btn-primary" id="confirmConsent">Authorize Access</button>
          <button class="btn-outline" id="cancelConsent">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script src="js/apply.js"></script>
</body>
</html>
