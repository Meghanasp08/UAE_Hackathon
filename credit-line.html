<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Credit Line Controls</title>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/auto-sweep-benefits.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" alt="Mercury Logo" class="logo" onerror="this.style.display='none'"/>
      <h1>Mercury Smart Credit</h1>
    </div>
    <nav class="nav-links">
  <a href="index.html" class="nav-link">Dashboard</a>
  <a href="credit-line.html" class="nav-link active">Credit Line</a>
  <a href="apply.html" class="nav-link">Apply</a>
  <a href="transactions.html" class="nav-link">Transactions</a>
    </nav>
    <div class="user">Hello, Meghana</div>
  </header>

  <main class="container">
    <section class="credit-header">
      <h2>Your Credit Line</h2>
      <p class="subtitle">Manage your flexible credit with SmartPay automation</p>
    </section>

    <!-- Credit Line Summary -->
    <div class="credit-summary-card">
      <div class="credit-visual">
        <svg viewBox="0 0 200 200" class="credit-circle">
          <circle cx="100" cy="100" r="90" fill="none" stroke="#e5e7eb" stroke-width="20"/>
          <circle cx="100" cy="100" r="90" fill="none" stroke="#0f6ef3" stroke-width="20" 
                  stroke-dasharray="565.48" stroke-dashoffset="452.38" stroke-linecap="round"
                  transform="rotate(-90 100 100)" id="creditUsageCircle"/>
          <text x="100" y="95" text-anchor="middle" font-size="24" font-weight="bold" fill="#111">18%</text>
          <text x="100" y="115" text-anchor="middle" font-size="12" fill="#6b7280">Used</text>
        </svg>
      </div>
      <div class="credit-details">
        <div class="credit-row">
          <span class="credit-label">Total Credit Limit</span>
          <span class="credit-value">AED 15,250</span>
        </div>
        <div class="credit-row">
          <span class="credit-label">Available Credit</span>
          <span class="credit-value highlight">AED 12,500</span>
        </div>
        <div class="credit-row">
          <span class="credit-label">Used</span>
          <span class="credit-value">AED 2,750</span>
        </div>
        <div class="credit-row">
          <span class="credit-label">Interest Rate (APR)</span>
          <span class="credit-value">8.9%</span>
        </div>
        <div class="credit-row">
          <span class="credit-label">Pay-as-you-go Fee</span>
          <span class="credit-value">0.5% per transaction</span>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <section class="credit-actions">
      <button class="action-btn primary" id="withdrawBtn">
        <span class="btn-icon">üí∞</span>
        <span>Withdraw</span>
      </button>
      <button class="action-btn secondary" id="repayBtn">
        <span class="btn-icon">‚Ü©Ô∏è</span>
        <span>Repay</span>
      </button>
      <button class="action-btn secondary" id="transferBtn">
        <span class="btn-icon">üîÑ</span>
        <span>Transfer to Account</span>
      </button>
    </section>

    <!-- SmartPay Rules -->
    <section class="smartpay-section">
      <div class="section-header">
        <h3>SmartPay Automation Rules</h3>
        <button class="btn-primary small" id="addRuleBtn">+ Add Rule</button>
      </div>

      <div class="auto-sweep-card">
        <div class="sweep-header">
          <div>
            <h4>‚ö° Auto-Sweep</h4>
            <p>Automatically repay credit when your account balance exceeds threshold</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="autoSweepToggle"/>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div id="sweepSettings" class="sweep-settings" hidden>
          <div class="setting-row">
            <label>Trigger when balance exceeds</label>
            <input type="number" id="sweepThreshold" value="5000" placeholder="5000"/>
            <span>AED</span>
          </div>
          <div class="setting-row">
            <label>Sweep schedule</label>
            <select id="sweepSchedule">
              <option value="immediate">Immediate</option>
              <option value="daily">Daily at 9 AM</option>
              <option value="weekly">Weekly (Monday)</option>
            </select>
          </div>
          <button class="btn-outline small" id="saveSweepSettings">Save Settings</button>
        </div>
        
        <!-- Auto-sweep Benefits Section -->
        <div class="sweep-benefits" id="sweepBenefits" style="display:none;">
          <h4>üí° Smart Auto-Sweep Benefits</h4>
          <div class="benefits-grid">
            <div class="benefit-card">
              <span class="benefit-icon">üí∞</span>
              <h5>Interest Saved (Monthly)</h5>
              <p class="benefit-value" id="interestSaved">AED 0</p>
              <span class="benefit-trend positive" id="interestTrend">‚Üó Projected 12% annual savings</span>
            </div>
            <div class="benefit-card">
              <span class="benefit-icon">‚ö°</span>
              <h5>Auto-Payments Made</h5>
              <p class="benefit-value" id="autoPayments">0</p>
              <span class="benefit-meta">Last 30 days</span>
            </div>
            <div class="benefit-card">
              <span class="benefit-icon">‚è±Ô∏è</span>
              <h5>Time Saved</h5>
              <p class="benefit-value" id="timeSaved">0 hrs</p>
              <span class="benefit-meta">Manual payment time saved</span>
            </div>
            <div class="benefit-card">
              <span class="benefit-icon">üìà</span>
              <h5>Cash Efficiency</h5>
              <p class="benefit-value" id="cashEfficiency">0%</p>
              <span class="benefit-meta">Improved cash utilization</span>
            </div>
          </div>
          <div class="benefits-summary">
            <h5>Smart Management Summary</h5>
            <ul class="benefits-list" id="benefitsList">
              <!-- Dynamically populated -->
            </ul>
          </div>
        </div>
      </div>

      <!-- Rules List -->
      <div id="rulesList" class="rules-list">
        <div class="rule-card">
          <div class="rule-header">
            <div class="rule-info">
              <h4>Monthly Auto-Repay</h4>
              <span class="rule-status active">Active</span>
            </div>
            <div class="rule-actions">
              <button class="btn-icon" aria-label="Edit rule">‚úèÔ∏è</button>
              <button class="btn-icon" aria-label="Delete rule">üóëÔ∏è</button>
            </div>
          </div>
          <div class="rule-body">
            <p><strong>Trigger:</strong> 1st of every month at 10:00 AM</p>
            <p><strong>Action:</strong> Repay 50% of outstanding balance</p>
            <p><strong>Last executed:</strong> Nov 1, 2025</p>
          </div>
        </div>

        <div class="rule-card">
          <div class="rule-header">
            <div class="rule-info">
              <h4>High Balance Transfer</h4>
              <span class="rule-status active">Active</span>
            </div>
            <div class="rule-actions">
              <button class="btn-icon" aria-label="Edit rule">‚úèÔ∏è</button>
              <button class="btn-icon" aria-label="Delete rule">üóëÔ∏è</button>
            </div>
          </div>
          <div class="rule-body">
            <p><strong>Trigger:</strong> When checking account balance > AED 10,000</p>
            <p><strong>Action:</strong> Transfer excess to savings (keep AED 8,000 buffer)</p>
            <p><strong>Last executed:</strong> Nov 3, 2025</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Rule Activity -->
    <section class="rule-activity">
      <h3>Recent Rule Executions</h3>
      <div class="activity-list">
        <div class="activity-item">
          <span class="activity-icon success">‚úì</span>
          <div class="activity-content">
            <p><strong>Monthly Auto-Repay</strong> executed successfully</p>
            <span class="activity-meta">Repaid AED 1,375 ¬∑ Nov 1, 2025 10:00 AM</span>
          </div>
        </div>
        <div class="activity-item">
          <span class="activity-icon success">‚úì</span>
          <div class="activity-content">
            <p><strong>High Balance Transfer</strong> executed successfully</p>
            <span class="activity-meta">Transferred AED 2,000 to savings ¬∑ Nov 3, 2025 3:45 PM</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Floating voice button -->
  <button id="voiceBtn" class="voice-btn" aria-label="Activate voice commands" title="Voice commands">
    üé§
  </button>

  <!-- Voice feedback live region -->
  <div id="voiceFeedback" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- Add Rule Modal -->
  <div id="ruleModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="ruleModalTitle" hidden>
    <div class="modal-content large">
      <div class="modal-header">
        <h3 id="ruleModalTitle">Create SmartPay Rule</h3>
        <button class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="ruleForm">
          <div class="form-group">
            <label for="ruleName">Rule Name *</label>
            <input type="text" id="ruleName" required placeholder="e.g., Weekend Repayment"/>
          </div>

          <div class="form-group">
            <label>Trigger Condition *</label>
            <select id="triggerType" required>
              <option value="">Select trigger type</option>
              <option value="balance">Account balance threshold</option>
              <option value="credit">Credit usage threshold</option>
              <option value="schedule">Scheduled time</option>
              <option value="transaction">On transaction</option>
            </select>
          </div>

          <div id="triggerDetails" class="form-group" hidden>
            <!-- Dynamic based on trigger type -->
          </div>

          <div class="form-group">
            <label>Action *</label>
            <select id="actionType" required>
              <option value="">Select action</option>
              <option value="repay">Repay credit</option>
              <option value="transfer">Transfer to savings</option>
              <option value="limit">Adjust credit limit</option>
            </select>
          </div>

          <div id="actionDetails" class="form-group" hidden>
            <!-- Dynamic based on action type -->
          </div>

          <div class="form-group">
            <label>Priority</label>
            <select id="rulePriority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">Create Rule</button>
            <button type="button" class="btn-outline" id="cancelRule">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Transaction Modal -->
  <div id="transactionModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="transactionTitle" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="transactionTitle">Quick Transaction</h3>
        <button class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="transactionForm">
          <div class="form-group">
            <label for="transactionAmount">Amount (AED) *</label>
            <input type="number" id="transactionAmount" required min="1" step="0.01" placeholder="500"/>
          </div>
          <div class="form-group" id="transactionNoteGroup">
            <label for="transactionNote">Note</label>
            <input type="text" id="transactionNote" placeholder="Optional note"/>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary" id="confirmTransaction">Confirm</button>
            <button type="button" class="btn-outline" id="cancelTransaction">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script src="js/credit-line.js"></script>
  <script src="js/auto-sweep-benefits.js"></script>
</body>
</html>
